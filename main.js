(()=>{"use strict";function e(e,t,n,o){var s=t.querySelector(".card").cloneNode(!0),i=s.querySelector(".card__title"),a=s.querySelector(".card__image");return a.addEventListener("click",o),a.src=e.link,a.alt="фотография: ".concat(e.name),i.textContent=e.name,s.querySelector(".card__like-button").addEventListener("click",r),s.querySelector(".card__delete-button").addEventListener("click",(function(e){n(e.target.closest(".card"))})),s}var t=function(e){e.remove()};function r(e){e.currentTarget.classList.toggle("card__like-button_is-active")}function n(e){e.classList.add("popup_is-animated"),e.classList.add("popup_is-opened"),document.addEventListener("keydown",s),e.addEventListener("click",i)}function o(e){document.removeEventListener("keydown",s),e.removeEventListener("click",i),e.classList.remove("popup_is-opened")}function s(e){"Escape"===e.key&&o(document.querySelector(".popup_is-opened"))}function i(e){e.target.classList.contains("popup_is-opened")&&o(e.target),e.target.classList.contains("popup__close")&&o(e.target.closest(".popup_is-opened"))}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var l,c,u,p,d,m,f,v=function(e){var t=e.inputList,r=e.submitButtonElement,n=e.inactiveButtonClass;!function(e){return e.some((function(e){return!e.validity.valid}))}(t)?(r.disabled=!1,r.classList.remove(n)):(r.disabled=!0,r.classList.add(n))},y=function(e){var t,r=e.formElement,n=e.inputSelector,o=e.inputErrorClass,s=e.submitButtonSelector,i=e.inactiveButtonClass,l=e.errorClass,c=function(e){if(Array.isArray(e))return a(e)}(t=r.querySelectorAll(n))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),u=r.querySelector(s);v({inputList:c,submitButtonElement:u,inactiveButtonClass:i}),c.forEach((function(e){e.addEventListener("input",(function(){!function(e){var t=e.formElement,r=e.inputElement,n=e.inputErrorClass,o=e.errorClass;r.validity.patternMismatch?r.setCustomValidity(r.dataset.errorMessage):r.setCustomValidity(""),r.validity.valid?function(e){var t=e.formElement,r=e.inputElement,n=e.inputErrorClass,o=e.errorClass,s=t.querySelector(".".concat(r.id,"-error"));s.classList.remove(o),s.textContent="",r.classList.remove(n)}({formElement:t,inputElement:r,errorClass:o,inputErrorClass:n}):function(e){var t=e.inputElement,r=e.inputErrorClass,n=e.errorClass,o=e.errorMessage,s=e.formElement.querySelector(".".concat(t.id,"-error"));s.textContent=o,s.classList.add(n),t.classList.add(r)}({formElement:t,inputElement:r,errorMessage:r.validationMessage,errorClass:o,inputErrorClass:n})}({formElement:r,inputElement:e,inputErrorClass:o,errorClass:l}),v({inputList:c,submitButtonElement:u,inactiveButtonClass:i})}))}))},_=document.querySelector("#card-template").content,E=document.querySelector(".places__list"),C=document.querySelector(".profile__edit-button"),S=document.querySelector(".popup_type_edit"),b=document.querySelector(".profile__add-button"),g=document.querySelector(".popup_type_new-card"),k=document.querySelector(".popup__image"),L=document.querySelector(".popup__caption"),q=document.querySelector(".popup_type_image"),h=document.forms["new-place"],x=h.elements["place-name"],B=h.elements.link,A=document.querySelector(".profile__title"),j=document.querySelector(".profile__description"),w=document.forms["edit-profile"],M=w.elements.name,T=w.elements.description;function D(e){k.src=e.currentTarget.src,k.alt=e.currentTarget.alt,L.textContent=e.currentTarget.alt,n(q)}[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(r){E.append(e(r,_,t,D))})),C.addEventListener("click",(function(e){M.value=A.textContent,T.value=j.textContent,n(S)})),b.addEventListener("click",(function(e){n(g)})),h.addEventListener("submit",(function(r){r.preventDefault(),E.prepend(e({name:x.value,link:B.value},_,t,D)),h.reset(),o(g)})),w.addEventListener("submit",(function(e){e.preventDefault(),A.textContent=M.value,j.textContent=T.value,o(S)})),c=(l={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"}).formSelector,u=l.inputSelector,p=l.submitButtonSelector,d=l.inactiveButtonClass,m=l.inputErrorClass,f=l.errorClass,document.querySelectorAll(c).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),y({formElement:e,inputSelector:u,submitButtonSelector:p,inactiveButtonClass:d,inputErrorClass:m,errorClass:f})}))})();